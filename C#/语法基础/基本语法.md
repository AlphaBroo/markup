# 基本语法

## 文件结构

项目文件

```
.sln   		解决方案文件
.csproj		项目文件
.cs				类文件
```

代码文件

```c#
// 引用命名空间
using System;

// 项目名或命名空间
namespace RectangleApplication
{
  	// 类名
    class Rectangle
    {
        // 成员变量
        double length;
        double width;
      	// 成员函数
        public void Acceptdetails()
        {
            length = 4.5;    
            width = 3.5;
        }
        public double GetArea()
        {
            return length * width;
        }
        public void Display()
        {
            Console.WriteLine("Length: {0}", length);
            Console.WriteLine("Width: {0}", width);
            Console.WriteLine("Area: {0}", GetArea());
        }
    }
    
    class ExecuteRectangle
    {
        // 程序的主函数入口
        static void Main(string[] args)
        {	
          	// 实例化一个类
            Rectangle r = new Rectangle();
            r.Acceptdetails();
            r.Display();
            Console.ReadLine();
        }
    }
}
```

注释

```
第一种:单行注释  
//单行注释

第二种:多行注释  
/*  */多行注释

第三种:文档注释 
///
///文档注释
///
```

## 存储类型

- 值类型

| bool    | 布尔值                               | True 或 False                                         | False |
| ------- | ------------------------------------ | ----------------------------------------------------- | ----- |
| byte    | 8 位无符号整数                       | 0 到 255                                              | 0     |
| char    | 16 位 Unicode 字符                   | U +0000 到 U +ffff                                    | '\0'  |
| decimal | 128 位精确的十进制值，28-29 有效位数 | (-7.9 x 1028 到 7.9 x 1028) / 100 到 28               | 0.0M  |
| double  | 64 位双精度浮点型                    | (+/-)5.0 x 10-324 到 (+/-)1.7 x 10308                 | 0.0D  |
| float   | 32 位单精度浮点型                    | -3.4 x 1038 到 + 3.4 x 1038                           | 0.0F  |
| int     | 32 位有符号整数类型                  | -2,147,483,648 到 2,147,483,647                       | 0     |
| long    | 64 位有符号整数类型                  | -923,372,036,854,775,808 到 9,223,372,036,854,775,807 | 0L    |
| sbyte   | 8 位有符号整数类型                   | -128 到 127                                           | 0     |
| short   | 16 位有符号整数类型                  | -32,768 到 32,767                                     | 0     |
| uint    | 32 位无符号整数类型                  | 0 到 4,294,967,295                                    | 0     |
| ulong   | 64 位无符号整数类型                  | 0 到 18,446,744,073,709,551,615                       | 0     |
| ushort  | 16 位无符号整数类型                  | 0 到 65,535                                           | 0     |

- 引用类型

引用类型不包含存储在变量中的实际数据，但它们包含对变量的引用。

换句话说，它们指的是一个内存位置。使用多个变量时，引用类型可以指向一个内存位置。如果内存位置的数据是由一个变量改变的，其他变量会自动反映这种值的变化

内置引用类型：`object,dynamic,string `

自定义引用类型：`class, interface, delegate`

> object

**对象（Object）类型** 是 C# 通用类型系统（Common Type System - CTS）中所有数据类型的终极基类。Object 是 System.Object 类的别名。所以对象（Object）类型可以被分配任何其他类型（值类型、引用类型、预定义类型或用户自定义类型）的值。但是，在分配值之前，需要先进行类型转换。

当一个值类型转换为对象类型时，则被称为 **装箱**；另一方面，当一个对象类型转换为值类型时，则被称为 **拆箱**。

```c#
object obj;
obj = 100; // 这是装箱
```

> dynamic

以存储任何类型的值在动态数据类型变量中。这些变量的类型检查是在运行时发生的。

声明动态类型的语法：

```
dynamic <variable_name> = value;
```

例如：

```c#
dynamic d = 20;
```

动态类型与对象类型相似，但是对象类型变量的类型检查是在编译时发生的，而动态类型变量的类型检查是在运行时发生的。

> String

**字符串（String）类型** 允许您给变量分配任何字符串值。字符串（String）类型是 System.String 类的别名。它是从对象（Object）类型派生的。字符串（String）类型的值可以通过两种形式进行分配：引号和 @引号。

```c#
String str = "runoob.com";
String str = @"runoob.com";

string str = @"C:\Windows";  // 将转义字符（\）当作普通字符对待
string str = "C:\\Windows";

string str = @"<script type=""text/javascript"">
    <!--
    -->
</script>"; // 可以任意换行，换行符及缩进空格都计算在字符串长度之内
```

- Pointer

指针类型变量存储另一种类型的内存地址。C# 中的指针与 C 或 C++ 中的指针有相同的功能。

声明指针类型的语法：

```
type* identifier;
```

例如：

```c#
char* cptr;
int* iptr;
```

## 类型转换

类型转换从根本上说是类型铸造，或者说是把数据从一种类型转换为另一种类型。

### 转换类型

隐式类型转换

```
这些转换是 C# 默认的以安全方式进行的转换, 不会导致数据丢失。例如，从小的整数类型转换为大的整数类型，从派生类转换为基类。
```

显式类型转换

```
显式类型转换，即强制类型转换。显式转换需要强制转换运算符，而且强制转换会造成数据丢失。
```

### 转换方法

- 使用类型声明

```c#
// 隐式转换
short st = 250;
int i = st;  // 将短整形隐式转换为整型
// var定义的变量的数据类型由赋值的数据决定
var intNum = 250;
int i = intNum;  // 隐式转换为整型

// 显式转换
float pi = 3.14;
int i = (int)pi;  // 将单精度强制转换为整型
```

- 使用Convert类

内置类型转换方法

| name         | desc                                            | name       | desc                             |
| ------------ | ----------------------------------------------- | ---------- | -------------------------------- |
| `ToBoolean`  | 如果可能的话，把类型转换为布尔型                | `ToInt64`  | 把类型转换为 64 位整数类型       |
| `ToByte`     | 把类型转换为字节类型                            | `ToSbyte`  | 把类型转换为有符号字节类型       |
| `ToChar`     | 如果可能的话，把类型转换为单个 Unicode 字符类型 | `ToSingle` | 把类型转换为小浮点数类型         |
| `ToDateTime` | 把类型（整数或字符串类型）转换为 日期-时间 结构 | `ToString` | 把类型转换为字符串类型           |
| `ToDecimal`  | 把浮点型或整数类型转换为十进制类型              | `ToType`   | 把类型转换为指定类型             |
| `ToDouble`   | 把类型转换为双精度浮点型                        | `ToUint16` | 把类型转换为 16 位无符号整数类型 |
| `ToInt16`    | 把类型转换为 16 位整数类型                      | `ToUint32` | 把类型转换为 32 位无符号整数类型 |
| `ToInt32`    | 把类型转换为 32 位整数类型                      | `ToUint64` | 把类型转换为 64 位无符号整数类型 |

示例

```c#
// Convert类转换
String MyString = "true";
Bool MyBool = Convert.ToBoolean(MyString);  // 将string转换为Boolean型
String newString = "123";
int MyInt = Convert.ToInt32(newString);  // 将字符串转换为数字值
```

- 数字和字符串转换

数字和字符串间转换方法

```c#
ToString()
// 数值类型的ToString()方法可以将数值型数据转换为字符串
Parse()
// 数值类型的Parse()方法可以将字符串转换为数值型
```

- 装箱和拆箱

拆箱是将"引用"类型转换为"值"类型，装箱是将"值"类型转换成"引用"类型。

```c#
int n = 4;
object obj = n;  // 封箱，将int值类型隐式地转换为object引用类型
Console.WriteLine("n的初始值为:{0}, 装箱后的值为{1}", n, obj.ToString());
int m = (int)obj  // 拆箱，把一个object类型隐式地转换为值类型
Console.WriteLine("引用值类型的值为:{0}, 拆箱后的值为{1}", obj.ToString()，m);
```

## 变量常量

### 变量

一个变量只不过是一个供程序操作的存储区的名字。在 C# 中，每个变量都有一个特定的类型，类型决定了变量的内存大小和布局。范围内的值可以存储在内存中，可以对变量进行一系列操作

- 类型

| 类型               | 举例                                                       |
| :----------------- | :--------------------------------------------------------- |
| 整数类型           | sbyte、byte、short、ushort、int、uint、long、ulong 和 char |
| 浮点型             | float 和 double                                            |
| 十进制类型         | decimal                                                    |
| 布尔类型           | true 或 false 值，指定的值                                 |
| 空类型             | 可为空值的数据类型                                         |
| 字符串             | string                                                     |
| 隐式类型的局部变量 | var                                                        |

- 命名

```
1. 变量名必须以字母或下划线开头，只能由字母、数字和下画线组成
2. 变量名不能包含空格、标点符号、运算符字符
3. 变量名不能与C#中的关键字、运算符或函数名同名
4. 使用多个单词组合为变量名时， 使用骆驼命名法
```

- 定义初始化

```c#
// 定义
<data_type> <variable_list>;
// 初始化
variable_name = value;
// 定义时初始化
<data_type> <variable_name> = value;
```

示例

```c#
int i, j, k;
char c = 'asd', ch;
float f, salary;
double d;
i = 100;
var s = 9;  // 定义局部变量，s作为字符串数据被编译
```

### 常量

常量是固定值，程序执行期间不会改变。常量可以是任何基本数据类型，比如整数常量、浮点常量、字符常量或者字符串常量，还有枚举常量。

常量可以被当作常规的变量，只是它们的值在定义后不能被修改。

> 整数常量

整数常量可以是十进制、八进制或十六进制的常量。前缀指定基数：0x 或 0X 表示十六进制，0 表示八进制，没有前缀则表示十进制。

整数常量也可以有后缀，可以是 U 和 L 的组合，其中，U 和 L 分别表示 unsigned 和 long。后缀可以是大写或者小写，多个后缀以任意顺序进行组合。

```c#
85         /* 十进制 */
0213       /* 八进制 */
0x4b       /* 十六进制 */
30         /* int */
30u        /* 无符号 int */
30l        /* long */
30ul       /* 无符号 long */
```

> 浮点常量

一个浮点常量是由整数部分、小数点、小数部分和指数部分组成。您可以使用小数形式或者指数形式来表示浮点常量。

```c#
3.14159       /* 合法 */
314159E-5L    /* 合法 */
510E          /* 非法：不完全指数 */
210f          /* 非法：没有小数或指数 */
.e55          /* 非法：缺少整数或小数 */
```

> 字符常量

字符常量是括在单引号里，例如，'x'，且可存储在一个简单的字符类型变量中。一个字符常量可以是一个普通字符（例如 'x'）、一个转义序列（例如 '\t'）或者一个通用字符（例如 '\u02C0'）。

在 C# 中有一些特定的字符，当它们的前面带有反斜杠时有特殊的意义，可用于表示换行符（\n）或制表符 tab（\t）

| 转义序列   | 含义                       |
| :--------- | :------------------------- |
| \\         | \ 字符                     |
| \'         | ' 字符                     |
| \"         | " 字符                     |
| \?         | ? 字符                     |
| \a         | Alert 或 bell              |
| \b         | 退格键（Backspace）        |
| \f         | 换页符（Form feed）        |
| \n         | 换行符（Newline）          |
| \r         | 回车                       |
| \t         | 水平制表符 tab             |
| \v         | 垂直制表符 tab             |
| \ooo       | 一到三位的八进制数         |
| \xhh . . . | 一个或多个数字的十六进制数 |

> 字符串常量

字符串常量是括在双引号 **""** 里，或者是括在 **@""** 里。字符串常量包含的字符与字符常量相似，可以是：普通字符、转义序列和通用字符

使用字符串常量时，可以把一个很长的行拆成多个行，可以使用空格分隔各个部分。

```c#
string a = "hello, world";                  // hello, world
string b = @"hello, world";               // hello, world
string c = "hello \t world";               // hello     world
string d = @"hello \t world";               // hello \t world
string e = "Joe said \"Hello\" to me";      // Joe said "Hello" to me
string f = @"Joe said ""Hello"" to me";   // Joe said "Hello" to me
string g = "\\\\server\\share\\file.txt";   // \\server\share\file.txt
string h = @"\\server\share\file.txt";      // \\server\share\file.txt
string i = "one\r\ntwo\r\nthree";
string j = @"one
two
three";
```

> 定义常量

```c#
const <data_type> <constant_name> = value;
```

## 运算符

### 算术

A = 10, B = 20

| 运算符 | 描述                             | 实例             |
| :----- | :------------------------------- | :--------------- |
| +      | 把两个操作数相加                 | A + B 将得到 30  |
| -      | 从第一个操作数中减去第二个操作数 | A - B 将得到 -10 |
| *      | 把两个操作数相乘                 | A * B 将得到 200 |
| /      | 分子除以分母                     | B / A 将得到 2   |
| %      | 取模运算符，整除后的余数         | B % A 将得到 0   |
| ++     | 自增运算符，整数值增加 1         | A++ 将得到 11    |
| --     | 自减运算符，整数值减少 1         | A-- 将得到 9     |

### 关系

A = 10, B = 20

| 运算符 | 描述                                                         | 实例              |
| :----- | :----------------------------------------------------------- | :---------------- |
| ==     | 检查两个操作数的值是否相等，如果相等则条件为真。             | (A == B) 不为真。 |
| !=     | 检查两个操作数的值是否相等，如果不相等则条件为真。           | (A != B) 为真。   |
| >      | 检查左操作数的值是否大于右操作数的值，如果是则条件为真。     | (A > B) 不为真。  |
| <      | 检查左操作数的值是否小于右操作数的值，如果是则条件为真。     | (A < B) 为真。    |
| >=     | 检查左操作数的值是否大于或等于右操作数的值，如果是则条件为真。 | (A >= B) 不为真。 |
| <=     | 检查左操作数的值是否小于或等于右操作数的值，如果是则条件为真。 | (A <= B) 为真。   |

### 逻辑

A = True, B = False

| 运算符 | 描述                                                         | 实例              |
| :----- | :----------------------------------------------------------- | :---------------- |
| &&     | 称为逻辑与运算符。如果两个操作数都非零，则条件为真。         | (A && B) 为假。   |
| \|\|   | 称为逻辑或运算符。如果两个操作数中有任意一个非零，则条件为真。 | (A \|\| B) 为真。 |
| !      | 称为逻辑非运算符。用来逆转操作数的逻辑状态。如果条件为真则逻辑非运算符将使其为假。 | !(A && B) 为真。  |

### 位

位运算符作用于位，并逐位执行操作。 

&、 | 和 ^ 的真值表如下所示:

| p    | q    | p & q | p \| q | p ^ q |
| :--- | :--- | :---- | :----- | :---- |
| 0    | 0    | 0     | 0      | 0     |
| 0    | 1    | 0     | 1      | 1     |
| 1    | 1    | 1     | 1      | 0     |
| 1    | 0    | 0     | 1      | 1     |

示例

```
假设如果 A = 60，且 B = 13，现在以二进制格式表示，它们如下所示：
A = 0011 1100
B = 0000 1101
-----------------
A&B = 0000 1100
A|B = 0011 1101
A^B = 0011 0001
~A  = 1100 0011
```

假设变量 **A** 的值为 60，变量 **B** 的值为 13

| 运算符 | 描述                                                         | 实例                                                         |
| :----- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| &      | 如果同时存在于两个操作数中，二进制 AND 运算符复制一位到结果中。 | (A & B) 将得到 12，即为 0000 1100                            |
| \|     | 如果存在于任一操作数中，二进制 OR 运算符复制一位到结果中。   | (A \| B) 将得到 61，即为 0011 1101                           |
| ^      | 如果存在于其中一个操作数中但不同时存在于两个操作数中，二进制异或运算符复制一位到结果中。 | (A ^ B) 将得到 49，即为 0011 0001                            |
| ~      | 按位取反运算符是一元运算符，具有"翻转"位效果，即0变成1，1变成0，包括符号位。 | (~A ) 将得到 -61，即为 1100 0011，一个有符号二进制数的补码形式。 |
| <<     | 二进制左移运算符。左操作数的值向左移动右操作数指定的位数。   | A << 2 将得到 240，即为 1111 0000                            |
| >>     | 二进制右移运算符。左操作数的值向右移动右操作数指定的位数。   | A >> 2 将得到 15，即为 0000 1111                             |

### 赋值

| 运算符 | 描述                                                         | 实例                            |
| :----- | :----------------------------------------------------------- | :------------------------------ |
| =      | 简单的赋值运算符，把右边操作数的值赋给左边操作数             | C = A + B 将把 A + B 的值赋给 C |
| +=     | 加且赋值运算符，把右边操作数加上左边操作数的结果赋值给左边操作数 | C += A 相当于 C = C + A         |
| -=     | 减且赋值运算符，把左边操作数减去右边操作数的结果赋值给左边操作数 | C -= A 相当于 C = C - A         |
| *=     | 乘且赋值运算符，把右边操作数乘以左边操作数的结果赋值给左边操作数 | C *= A 相当于 C = C * A         |
| /=     | 除且赋值运算符，把左边操作数除以右边操作数的结果赋值给左边操作数 | C /= A 相当于 C = C / A         |
| %=     | 求模且赋值运算符，求两个操作数的模赋值给左边操作数           | C %= A 相当于 C = C % A         |
| <<=    | 左移且赋值运算符                                             | C <<= 2 等同于 C = C << 2       |
| >>=    | 右移且赋值运算符                                             | C >>= 2 等同于 C = C >> 2       |
| &=     | 按位与且赋值运算符                                           | C &= 2 等同于 C = C & 2         |
| ^=     | 按位异或且赋值运算符                                         | C ^= 2 等同于 C = C ^ 2         |
| \|=    | 按位或且赋值运算符                                           | C \|= 2 等同于 C = C \| 2       |

### 其他

| 运算符   | 描述                                   | 实例                                                         |
| :------- | :------------------------------------- | :----------------------------------------------------------- |
| sizeof() | 返回数据类型的大小。                   | `sizeof(int)`，将返回 4.                                     |
| typeof() | 返回 class 的类型。                    | `typeof(StreamReader);`                                      |
| &        | 返回变量的地址。                       | &a; 将得到变量的实际地址。                                   |
| *        | 变量的指针。                           | *a; 将指向一个变量。                                         |
| ? :      | 条件表达式                             | 如果条件为真 ? 则为 X : 否则为 Y                             |
| is       | 判断对象是否为某一类型。               | `If( Ford is Car)` // 检查 Ford 是否是 Car 类的一个对象。    |
| as       | 强制转换，即使转换失败也不会抛出异常。 | `Object obj = new StringReader("Hello"); StringReader r = obj as StringReader;` |

### 优先级

| 类别       | 运算符                            | 结合性   |
| :--------- | :-------------------------------- | :------- |
| 后缀       | () [] -> . ++ - -                 | 从左到右 |
| 一元       | + - ! ~ ++ - - (type)* & sizeof   | 从右到左 |
| 乘除       | * / %                             | 从左到右 |
| 加减       | + -                               | 从左到右 |
| 移位       | << >>                             | 从左到右 |
| 关系       | < <= > >=                         | 从左到右 |
| 相等       | == !=                             | 从左到右 |
| 位与 AND   | &                                 | 从左到右 |
| 位异或 XOR | ^                                 | 从左到右 |
| 位或 OR    | \|                                | 从左到右 |
| 逻辑与 AND | &&                                | 从左到右 |
| 逻辑或 OR  | \|\|                              | 从左到右 |
| 条件       | ?:                                | 从右到左 |
| 赋值       | = += -= *= /= %=>>= <<= &= ^= \|= | 从右到左 |
| 逗号       | ,                                 | 从左到右 |