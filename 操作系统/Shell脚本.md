# 基础知识

##  shell脚本

### 创建脚本

```
# 创建工具
vim/vi

# 脚本注释
单行注释	---> # 注释内容
多行注释	---> :<<! 注释内容！

# 示例
#!/bin/bash
# demo
echo '1'
:<<!
echo '2'
!
echo '3'
```

### 脚本执行

```
# 脚本文件本身没有可执行权限或者脚本首行没有命令解释器(推荐)
bash /path/to/script-name	或 /bin/bash /path/to/script-name

# 脚本文件具有可执行权限时使用
/path/to/script-name		或 ./script-name

# 加载shell脚本文件内容
source script-name			或 . script-name
```

### 脚本开发规范

- 脚本命令要有意义，文件后缀.sh
- 脚本文件首行是且必须是脚本解释器`#!bin/bash`
- 脚本文件解释器后面要有脚本的基本信息等内容
- 脚本文件常见执行方式`bash 脚本名`
- 脚本内容执行：从上到下，一次执行
- 代码书写优秀习惯(成对内容一次性写完，[]两端要有空格，流程控制语句一次性写完 )
- 通过缩进让代码容易易读

## 变量

```
# 查看变量
# 方式一
$变量名
# 方式二
"$变量名"
# 方式三
${变量名}
# 方式四(推荐)
"${变量名}"

# 取消变量
unset 变量名
```

### 本地变量

```
# 普通变量
变量名 = 变量值
变量名 = '变量值'
变量名 = "变量值"

# 命令变量
变量名 = `命令`
变量名 = $(命令)

# 执行流程
1.执行'后者$()范围内的命令
2.将命令执行后的结果，赋值给新的变量名
```

### 全局变量

```
# 查看
env

# 定义
# 方法一：
变量=值
export 变量
# 方法二：
export 变量=值
```

### 内置变量

```
$0		获取当前执行的shell脚本文件名，包括脚本路径
$n		获取当前执行的shell脚本的第n个参数值，0表示文件名，大于9就$(10)
$#		获取当前shell命令中参数的总个数
#?		获取执行上一个指令的返回值(0表示成功，非0为失败)
```

### 字符串精确截取

```
# 格式
${变量名：起始位置：截取长度}
```

### 默认值

```
# 若变量有内容，输出变量值；若变量内无内容，输出默认值
${变量名:-默认值}

# 无论变量是否有内容，均输出默认值
${变量名+默认值}
```

# 进阶

## 表达式

### 测试语句

```
# 方式一
test 条件表达式
# 方式二
[ 条件表达式 ]

# 条件成立，状态返回值是0，条件不成立，状态返回值是1
```

### 条件表达式

- 逻辑表达式

```
# &&
命令1 && 命令2	--->	若命令1执行成功，才执行命令2；若命令1执行失败，那么命令2也不执行
# ||
命令1 || 命令2	--->	若命令1执行成功，则命令2不执行；若命令1执行失败，则命令2执行
```

- 文件表达式

```
-f	判断输入内容是否是一个文件
-d	判断输入内容是否是一个目录
-x  判断输入内容是否是可执行
```

- 数值操作符

```
# 主要根据给定的两个值，判断第一个与第二个数的关系，如是否大于、小于、等于第二个数。常见选项如下：
n1 -eq n2	---> 相等
n1 -gt n2 	---> 大于
n1 -lt n2 	---> 小于
n1 -ne n2 	---> 不等于
```

- 字符串比较

```
str1 == str2	---> str1和str2字符串内容一致
str1 != str2	---> str1和str2字符创内容不一致
```

### 计算表达式

```
# 方式一：
$(( 计算表达式 ))	---> eg:s((100/5))

# 方式二：
let 计算表达式		---> eg: let i=i+7
```

## Linux常见符号

### 重定向

```
>		---> 表示将符号左侧的内容，以覆盖的方式输入到右侧文件中
>>		---> 表示将符号左侧的内容，以追加的方式输入到右侧文件的末尾行中
```

### 管道符

```
|		---> 管道符左侧命令执行的结果，传递给管道右侧的命令使用
```

### 后台展示

```
&		---> 将一个命令从前台转到后台执行
```

### 全部信息符号

```
2>&1
1		--->表示正确输出的信息
2		--->表示错误输出的信息
2>&1	--->代表所有输出的信息
```

### grep

```
# 文本搜索命令

grep [参数] [关键字] <文件名>

# 注意：
1. 在查看某个文件的内容的时候，是需要有<文件名>
2. grep命令个在结合|(管道符)使用的情况下，后面的<文件名>是没有的
3. 可以通过 grep --help查看grep的帮助信息

# 参数：
-c	只能输出匹配行的计数
-n	显示匹配行及行号
-v	显示不包含匹配文本的所有行

# 精确定位错误代码
grep -nr [错误关键字] *
```

### sed

```
# 行文件编辑工具

sed [参数] '<匹配条件> [动作]' [文件名]

# 注意：
1. 可以通过sed --help查看sed的帮助信息
# 参数
参数为空	表示sed的操作效果，实际上不对文件进行编辑
-i		表示对文件进行编辑
		注意：mac中需在后面单独加上：-i ''

# 匹配条件
数字行号
关进字		---> '/关键字/'
			注意：隔离符号/可更换为@#！等
			
# 动作详解(参数为i)
-a		在匹配到的内容下一行增加内容
-i		在匹配到的内容上一行增加内容
-d		删除匹配到的内容
-s		替换匹配到的内容

# 替换命令
# 替换每行首个匹配内容
sed -i 's#原内容#替换后内容#' 文件名
# 替换全部匹配内容
sed -i 's#原内容#替换后内容#g' 文件名
# 指定行号替换首个匹配内容
sed -i '行号s#原内容#替换后内容#' 文件名
# 首行指定列号替换匹配内容
sed -i 's#原内容#替换后内容#列号' 文件名
# 指定行号列号匹配内容
sed -i '行号s#原内容#替换后内容#列号' 文件名

# 增加操作
# 在指定行号的下一行增加内容
sed -i '行号a\增加的内容' 文件名
# 增加多行
sed -i '1,3a\增加内容' 文件名
# 在指定行号的当行增加内容
sed -i '行号i\增加的内容' 文件名
# 增加多行
sed -i '1,3i\增加内容' 文件名

# 删除操作
# 指定行号删除
sed -i '行号d' 文件名
# 删除多行
sed -i '1,3d' 文件名
```

### awk

```

```

