# 路由

路由允许用户为不同的URL端点指定处理程序功能。

基本路线如下所示，其中app是Sanic类的实例：

```python
from sanic.response import json

@app.route("/")
async def test(request):
    return json({ "hello": "world" })
```

当访问URL` http：//server.url/`（服务器的基本URL）时，路由器将最后一个`/`与处理程序函数`test`匹配，然后返回JSON对象。

Sanic处理程序函数必须使用`async def`语法定义，因为它们是异步函数。

## 请求参数

Sanic带有支持请求参数的基本路由器。

要指定参数，请用诸如此类的斜杠引起来：`<PARAM>`。请求参数将作为关键字参数传递给路由处理程序函数。

```python
from sanic.response import text

@app.route('/tag/<tag>')
async def tag_handler(request, tag):
    return text('Tag - {}'.format(tag))
```

要为参数指定类型，请在参数名称后的引号内添加`:type`。如果参数与指定的类型不匹配，Sanic将抛出NotFound异常，从而导致URL上出现`404: Page not found error on the URL`。

### 支持的类型

- string

```
"Bob"
"python 3"
```

- int

```
10
20
30
-10
(No floats work here)
```

- number

```
1
1.5
10
-10
```

- alpha

```
"Bob"
"python"
(If it contains a symbol or a non alphanumeric character it will fail)
```

- path

```
“hello”
“hello.text”
“hello world”
```

- uuid

```
123a123a-a12a-1a1a-a1a1-1a12a1a12345 (UUIDv4 Support)
```

- 正则表达式

如果未设置任何类型，则应为字符串。赋予函数的参数将始终是字符串，与类型无关。

```python
from sanic.response import text

@app.route('/string/<string_arg:string>')
async def string_handler(request, string_arg):
    return text('String - {}'.format(string_arg))

@app.route('/int/<integer_arg:int>')
async def integer_handler(request, integer_arg):
    return text('Integer - {}'.format(integer_arg))

@app.route('/number/<number_arg:number>')
async def number_handler(request, number_arg):
    return text('Number - {}'.format(number_arg))

@app.route('/alpha/<alpha_arg:alpha>')
async def number_handler(request, alpha_arg):
    return text('Alpha - {}'.format(alpha_arg))

@app.route('/path/<path_arg:path>')
async def number_handler(request, path_arg):
    return text('Path - {}'.format(path_arg))

@app.route('/uuid/<uuid_arg:uuid>')
async def number_handler(request, uuid_arg):
    return text('Uuid - {}'.format(uuid_arg))

@app.route('/person/<name:[A-z]+>')
async def person_handler(request, name):
    return text('Person - {}'.format(name))

@app.route('/folder/<folder_id:[A-z0-9]{0,4}>')
async def folder_handler(request, folder_id):
    return text('Folder - {}'.format(folder_id))
```

> 警告
>
> str不是有效的类型标记。如果要str识别，则必须使用字符串

## HTTP请求类型

