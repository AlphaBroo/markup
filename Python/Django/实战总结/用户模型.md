# 用户模型

## 创建

### Django自带User

```
from django.contrib.auth.models import User
```

字段

| name           | python中type | Option | mysql中type |
| -------------- | ------------ | ------ | ----------- |
| `username`     | String       | 必选   | varchar     |
| `first_name`   | string       | 可选   | varchar     |
| `last_name`    | string       | 可选   | varchar     |
| `email`        | string       | 可选   | varchar     |
| `password`     | String       | 必选   | varchar     |
| `is_staff`     | Boolean      | 必选   | tinyint(1)  |
| `is_active`    | Boolean      | 必选   | tinyint(1)  |
| `is_superuser` | Boolean      | 必选   | tinyint(1)  |
| `last_login`   | Datetime     | 可选   | Datetime    |
| `date_joined`  | Datetime     | 必选   | Datetime    |

### 扩展User

方法一

```python
from django.contrib.auth.models import User

class Employee(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    department = models.CharField(max_length=100)
```

方法二

```python
from django.contrib.auth.models import AbstractUser

class User(AbstractUser):
    pass
```

### 核心User

```python
from django.contrib.auth.models import BaseUserManager, AbstractBaseUser


class MyUserManager(BaseUserManager):
		pass
		
		
class MyUser(AbstractBaseUser):
		pass
```

必有字段

```
password
last_login
```

## 使用

引入用户模型

```
 # 方法一:使用import直接引用
 from users.models import UserProfile
 user = models.ForeignKey(UserProfile)
 
 # 方法二：使用get_user_model()获取User(推荐)
 from django.contrib.auth import get_user_model
 User = get_user_model()
 user = models.ForeignKey(User)
```



